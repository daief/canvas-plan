parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({7:[function(require,module,exports) {

},{}],21:[function(require,module,exports) {
"use strict";function t(){return+new Date}function e(){var t=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function n(t,e){var n=Math.max(t.left,e.left),r=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),x=Math.min(t.top+t.height,e.top+e.height);return!(n>o||r>x)}function r(t,e){return Math.acos(t/Math.sqrt(t*t+e*e))}function o(t,e,n,r,o){var x=Math.sqrt((t-n)*(t-n)+(e-r)*(e-r));return{x:o/x*(n-t),y:o/x*(r-e)}}function x(t){return t*Math.PI/180}function a(t){return 180*t/Math.PI}function i(t,e,n){return new Promise(function(r,o){var x=setTimeout(function(){try{clearTimeout(x),r(t(n))}catch(t){o(t)}},e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTimeNow=t,exports.getGUID=e,exports.is2RectIntersect=n,exports.getVAngle=r,exports.getVelocityByLenPoint2Player=o,exports.angle2radian=x,exports.radian2angle=a,exports.delay=i;
},{}],20:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./utils"),e=function(){function e(t,e){var i=this;this.HIGH_SCORES_SUFFIX="_highscores",this.STRATING_FPS=60,this.PAUSE_TIMEOUT=100,this.NUM_SOUND_CHANNELS=10,this.canvas=document.getElementById(e),this.W=this.canvas.width,this.H=this.canvas.height,this._realContext=this.canvas.getContext("2d"),this._buffCanvas=document.createElement("canvas"),this._buffCanvas.width=this.W,this._buffCanvas.height=this.H,this.context=this._buffCanvas.getContext("2d"),this.gameName=t,this.sprites=[],this.keyListeners=[],this.score=0,this.images={},this.imageUrls=[],this.imagesLoaded=0,this.imagesFailedToLoad=0,this.imagesIndex=0,this.startTime=0,this.lastTime=0,this.gameTime=0,this.fps=0,this.paused=!1,this.startedPauseAt=0,this.soundOn=!0,this.soundChannels=[],this.audio=new Audio;for(var s=0;s<this.NUM_SOUND_CHANNELS;s++){var a=new Audio;this.soundChannels.push(a)}window.onkeyup=function(t){i.keyPressed(t,!1)},window.onkeydown=function(t){i.keyPressed(t,!0)}}return e.prototype.keyPressed=function(t,e){var i,s=null;switch(t.keyCode){case 32:i="space";break;case 68:i="d";break;case 75:i="k";break;case 83:i="s";break;case 80:i="p";break;case 37:i="left arrow";break;case 39:i="right arrow";break;case 38:i="up arrow";break;case 40:i="down arrow";break;case 16:i="shift"}(s=this.findKeyListener(i))&&s(t,e)},e.prototype.findKeyListener=function(t){for(var e=null,i=0,s=this.keyListeners;i<s.length;i++){var a=s[i];a.key===t&&(e=a.listener)}return e},e.prototype.getImage=function(t){return this.images[t]},e.prototype.imageLoadedCallback=function(){this.imagesLoaded+=1},e.prototype.imageLoadErrorCallback=function(){this.imagesFailedToLoad+=1},e.prototype.loadImage=function(t){var e=this,i=new Image;i.src=t,i.addEventListener("load",function(){e.imageLoadedCallback()}),i.addEventListener("error",function(){e.imageLoadErrorCallback()}),this.images[t]=i},e.prototype.loadImages=function(){return this.imagesIndex<this.imageUrls.length&&(this.loadImage(this.imageUrls[this.imagesIndex]),this.imagesIndex+=1),(this.imagesLoaded+this.imagesFailedToLoad)/this.imageUrls.length*100},e.prototype.queueImage=function(t){this.imageUrls.push(t)},e.prototype.start=function(){var e=this;this.startTime=t.getTimeNow(),window.requestAnimationFrame(function(t){e.animate(t)})},e.prototype.animate=function(t){var e=this;this.paused?setTimeout(function(){e.animate(t)},this.PAUSE_TIMEOUT):(this.tick(t),this.clearScreen(),this.startAnimate(t),this.paintUnderSprites(),this.updateSprites(t),this.paintSprites(t),this.paintOverSprites(),this.endAnimate(),this._realContext.clearRect(0,0,this.W,this.H),this._realContext.drawImage(this._buffCanvas,0,0),window.requestAnimationFrame(function(t){e.animate(t)}))},e.prototype.tick=function(e){this.updateFrameRate(e),this.gameTime=t.getTimeNow()-this.startTime,this.lastTime=e},e.prototype.updateFrameRate=function(t){0===this.lastTime?this.fps=this.STRATING_FPS:this.fps=1e3/(t-this.lastTime)},e.prototype.clearScreen=function(){this.context.clearRect(0,0,this.W,this.H)},e.prototype.updateSprites=function(t){for(var e=0;e<this.sprites.length;e++){var i=this.sprites[e];i.visible&&i.update(this.context,t)}},e.prototype.paintSprites=function(t){for(var e=0;e<this.sprites.length;e++){var i=this.sprites[e];i.visible&&i.paint(this.context)}},e.prototype.togglePaused=function(){var e=t.getTimeNow();this.paused=!this.paused,this.paused?this.startedPauseAt=e:(this.startTime=this.startTime+e-this.startedPauseAt,this.lastTime=e)},e.prototype.pixelsPerFrame=function(t,e){return e/this.fps},e.prototype.getHighScores=function(){return JSON.parse(localStorage.getItem(this.gameName+this.HIGH_SCORES_SUFFIX)||"[]")},e.prototype.setHighScore=function(t){var e=this.gameName+this.HIGH_SCORES_SUFFIX;localStorage.setItem(e,this.getHighScores().unshift(t).toString())},e.prototype.clearHighScores=function(){localStorage.setItem(this.gameName+this.HIGH_SCORES_SUFFIX,"[]")},e.prototype.addKeyListener=function(t){this.keyListeners.push(t)},e.prototype.getAvailableSoundChannel=function(){for(var t,e=0;e<this.NUM_SOUND_CHANNELS;e++)if((t=this.soundChannels[e]).played&&t.played.length>0){if(t.ended)return t}else if(!t.ended)return t;return null},e.prototype.playSound=function(t){var e=this.getAvailableSoundChannel(),i=document.getElementById(t);e&&i&&(e.src=""===i.src?i.currentSrc:i.src,e.load(),e.play())},e.prototype.addSprite=function(t){this.sprites.push(t)},e.prototype.getSprite=function(t){for(var e=0,i=this.sprites;e<i.length;e++){var s=i[e];if(s.name===t)return s}return null},e.prototype.startAnimate=function(t){},e.prototype.paintUnderSprites=function(){},e.prototype.paintOverSprites=function(){},e.prototype.endAnimate=function(){},e.prototype.setFreeSpriteNew=function(t){for(var e=0;e<this.sprites.length;e++){var i=this.sprites[e];if(!i.visible&&"player"!==i.name)return this.sprites[e]=t,i}return this.addSprite(t),null},e.prototype.getRect=function(){return{left:0,top:0,width:this.W,height:this.H}},e}();exports.default=e,exports.game=new e("project","canvas");
},{"./utils":21}],13:[function(require,module,exports) {
module.exports="pl00.ee686290.png";
},{}],14:[function(require,module,exports) {
module.exports="bullets1.9c09af7c.png";
},{}],15:[function(require,module,exports) {
module.exports="bullet3.b4d1af49.png";
},{}],16:[function(require,module,exports) {
module.exports="enemy1.991e8bb6.png";
},{}],17:[function(require,module,exports) {
module.exports="core.ac272500.png";
},{}],18:[function(require,module,exports) {
module.exports="bg1.5a4400be.png";
},{}],19:[function(require,module,exports) {
module.exports="arua.4f06b8c0.png";
},{}],56:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.image=new Image,this.image.src=t}return t.prototype.paint=function(t,i){var e=this;void 0!==this.image&&(this.image.complete?(t.width=this.image.width,t.height=this.image.height,i.drawImage(this.image,t.left,t.top,t.width,t.height)):this.image.onload=function(h){t.width=e.image.width,t.height=e.image.height,i.drawImage(h.target,t.left,t.top,t.width,t.height)})},t}();exports.ImagePainter=t;var i=function(){function t(t,i){this.cells=t,this.spritesheet=i,this.cellIndex=0}return t.prototype.advance=function(){this.cellIndex=(this.cellIndex+1)%this.cells.length},t.prototype.paint=function(t,i){var e=this.cells[this.cellIndex];t.width=e.width,t.height=e.height,i.drawImage(this.spritesheet,e.left,e.top,e.width,e.height,t.left,t.top,e.width,e.height)},t}();exports.SpriteSheetPainter=i;var e=function(){function t(t,i){this.painters=t,this.elapsedCallback=i,this.duration=1e3,this.startTime=0,this.index=0}return t.prototype.end=function(t,i){t.animating=!1,this.elapsedCallback?this.elapsedCallback(t):t.painter=i},t.prototype.start=function(t,i){var e=this,h=+new Date+i,n=i/this.painters.length,s=null,a=t.painter;this.index=0,t.animating=!0,t.painter=this.painters[this.index],s=setInterval(function(){+new Date<h?(e.index+=1,t.painter=e.painters[e.index]||t.painter):(e.end(t,a),clearInterval(s))},n)},t}();exports.SpriteAnimator=e;var h=function(){function t(t,i,e){this.name=t,this.painter=i,this.behaviors=e,this.left=0,this.top=0,this.width=10,this.height=10,this.velocityX=0,this.velocityY=0,this.visible=!0,this.animating=!1}return t.prototype.paint=function(t){this.painter&&this.visible&&this.painter.paint(this,t)},t.prototype.update=function(t,i){for(var e=this.behaviors.length;e>0;e--)this.behaviors[e-1].execute(this,t,i)},t.prototype.getCoreRect=function(){var t=this,i=t.left,e=t.top,h=t.width,n=t.height,s=t.coreWidth,a=t.coreHeight;return s>0&&a>0?{left:i+(h-s)/2,top:e+(n-a)/2,width:s,height:a}:{left:i,top:e,width:h,height:n}},t.prototype.getCenterPoint=function(){return{left:this.left+this.width/2,top:this.top+this.height/2}},t}();exports.Sprite=h;
},{}],57:[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Sprite"),i=require("../Game"),h=require("../utils"),l=t(require("../../assets/arua.png")),r=128,a=[{left:0,top:0,width:r,height:r},{left:128,top:0,width:r,height:r},{left:256,top:0,width:r,height:r},{left:384,top:0,width:r,height:r},{left:512,top:0,width:r,height:r},{left:640,top:0,width:r,height:r},{left:768,top:0,width:r,height:r},{left:896,top:0,width:r,height:r},{left:640,top:0,width:r,height:r},{left:384,top:0,width:r,height:r},{left:128,top:0,width:r,height:r}];function p(t,p){var o={lastAdvance:0,PAGEFLIP_INTERVAL:100,execute:function(t,e,i){i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&(t.painter.advance(),this.lastAdvance=i),t.painter.cellIndex===a.length-1&&(t.visible=!1,p&&p())}},s=new e.Sprite("blast-"+h.getGUID(),new e.SpriteSheetPainter(a,i.game.getImage(l.default)),[o]),d=t.left,f=t.top,n=t.width,g=t.height;s.left=d+(n-r)/2,s.top=f+(g-r)/2,i.game.setFreeSpriteNew(s)}exports.showBlast=p;
},{"../Sprite":56,"../Game":20,"../utils":21,"../../assets/arua.png":19}],30:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function h(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(h.prototype=i.prototype,new h)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../Game"),h=e(require("../../assets/pl00.png")),o=e(require("../../assets/core.png")),r=require("../Sprite"),s=require("./Blast"),n=[{left:0,top:0,width:32,height:48},{left:32,top:0,width:32,height:48},{left:64,top:0,width:32,height:48},{left:96,top:0,width:32,height:48},{left:128,top:0,width:32,height:48},{left:160,top:0,width:32,height:48},{left:192,top:0,width:32,height:48},{left:224,top:0,width:32,height:48}],l=[{left:0,top:48,width:32,height:48},{left:32,top:48,width:32,height:48},{left:64,top:48,width:32,height:48},{left:96,top:48,width:32,height:48},{left:128,top:48,width:32,height:48},{left:160,top:48,width:32,height:48},{left:192,top:48,width:32,height:48},{left:224,top:48,width:32,height:48}],a=[{left:224,top:48,width:32,height:48}],p=[{left:0,top:96,width:32,height:48},{left:32,top:96,width:32,height:48},{left:64,top:96,width:32,height:48},{left:96,top:96,width:32,height:48},{left:128,top:96,width:32,height:48},{left:160,top:96,width:32,height:48},{left:192,top:96,width:32,height:48},{left:224,top:96,width:32,height:48}],f=[{left:224,top:97,width:32,height:48}],c=220,d=240,g=30,u=function(e){function h(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShield=!1,t.attack=5,t}return t(h,e),h.prototype.getShield=function(t){var e=this;this.shieldTimer&&clearTimeout(this.shieldTimer),this.isShield=!0,this.shieldTimer=setTimeout(function(){e.isShield=!1,clearTimeout(e.shieldTimer)},t||1e4)},h.prototype.setVelocitySlow=function(t){this.shift=t,t?(this.velocityX=c/2,this.velocityY=d/2):(this.velocityX=c,this.velocityY=d)},h.prototype.getCoreRect=function(){var t=this,e=t.left,i=t.top,h=t.width,o=t.height,r=t.coreWidth,s=t.coreHeight;return t.isShield?{left:e+h/2-g,top:i+o/2-g,width:2*g,height:2*g}:{left:e+(h-r)/2,top:i+(o-s)/2,width:r,height:s}},h.prototype.beHit=function(){var t=this,e=this.isShield;this.width;e||(s.showBlast(this,function(){var e=setTimeout(function(){clearTimeout(e),t.setPropsInit(),t.getShield(5e3)},2e3)}),this.clean())},h.prototype.clean=function(){var t=this.width;this.visible=!1,this.left=(i.game.W-t)/2,this.top=1e4,this.shieldTimer&&clearTimeout(this.shieldTimer),this.isShield=!1},h.prototype.setPropsInit=function(){this.width=32,this.height=48,this.left=(i.game.W-m.width)/2,this.top=i.game.H-m.height-50,this.coreWidth=10,this.coreHeight=10,this.velocityX=c,this.velocityY=d,this.attack=5,this.toUp=!1,this.toDown=!1,this.toLeft=!1,this.toRight=!1,this.shift=!1,this.visible=!0},h}(r.Sprite);exports.Player=u;var w=function(e){function h(){return null!==e&&e.apply(this,arguments)||this}return t(h,e),h.prototype.paint=function(t,e){var h=this.cells[this.cellIndex];e.drawImage(this.spritesheet,h.left,h.top,h.width,h.height,t.left,t.top,h.width,h.height);var r=t.width,s=t.height,n=t.top,l=t.left,a=t.coreWidth,p=t.coreHeight,f=t.isShield,c=[l+r/2,n+s/2],d=c[0],u=c[1];if(e.save(),t.shift&&e.drawImage(i.game.getImage(o.default),d-a/2,u-p/2),f){var w=["#de5050","#d07926","#8ae242","#38ccad","#3031cc","#bf30cc"];e.strokeStyle=w[parseInt((Math.random()*(w.length+1)).toString())],e.beginPath(),e.arc(d,u,g,0,2*Math.PI),e.closePath(),e.stroke()}e.restore()},h}(r.SpriteSheetPainter),m=null;function v(){if(m)return m;var t={lastAdvance:0,PAGEFLIP_INTERVAL:18,execute:function(t,e,h){t.toLeft&&(t.left-=i.game.pixelsPerFrame(h,t.velocityX)),t.toRight&&(t.left+=i.game.pixelsPerFrame(h,t.velocityX)),t.toUp&&(t.top-=i.game.pixelsPerFrame(h,t.velocityY)),t.toDown&&(t.top+=i.game.pixelsPerFrame(h,t.velocityY)),t.left=t.left>=i.game.W-t.width?i.game.W-t.width:t.left<=0?0:t.left,t.top=t.top>=i.game.H-t.height?i.game.H-t.height:t.top<=0?0:t.top,h-this.lastAdvance>this.PAGEFLIP_INTERVAL&&(t.toLeft||t.toRight)&&(t.painter.advance(),this.lastAdvance=h)}},e=i.game.getImage(h.default),o=new w(n,e),s=new w(l,e),c=new w(a,e),d=new r.SpriteAnimator([s],function(t){t.painter=c}),g=new r.SpriteAnimator([new w(l.slice().reverse(),e)],function(t){t.painter=t.toRight?P:o}),v=new w(p,e),P=new w(f,e),y=new r.SpriteAnimator([v],function(t){t.painter=P}),A=new r.SpriteAnimator([new w(p.slice().reverse(),e)],function(t){t.painter=t.toLeft?c:o});return(m=new u("player",o,[{lastAdvance:0,PAGEFLIP_INTERVAL:110,execute:function(t,e,i){i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&t.toLeft===t.toRight&&(t.painter.advance(),this.lastAdvance=i)}},t])).leftCalled=function(e){e?d.start(this,t.PAGEFLIP_INTERVAL*(l.length-1)):this.toRight?this.painter=P:g.start(this,t.PAGEFLIP_INTERVAL*(l.length-1))},m.rightCalled=function(e){e?y.start(this,t.PAGEFLIP_INTERVAL*(p.length-1)):this.toLeft?this.painter=c:A.start(this,t.PAGEFLIP_INTERVAL*(p.length-1))},m.setPropsInit(),m}exports.getPlayer=v;
},{"../Game":20,"../../assets/pl00.png":13,"../../assets/core.png":17,"../Sprite":56,"./Blast":57}],31:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),e=this&&this.__assign||Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../Game"),n=require("../Sprite"),o=require("../utils"),a=i(require("../../assets/bullets1.png")),l={left:1,top:1,width:6,height:28},s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.paint=function(t,e){var i=this;void 0!==this.image&&(this.image.complete?e.drawImage(this.image,l.left,l.top,2*l.width,2*l.height,t.left,t.top,l.width,l.height):this.image.onload=function(r){e.drawImage(i.image,l.left,l.top,2*l.width,2*l.height,t.left,t.top,l.width,l.height)})},i}(n.ImagePainter),p=function(){function t(){this.FIRE_TIME=165,this.FIRE_LAST=0}return t.prototype.addPlayerBullet=function(t){var i=r.game.getSprite("player");if(!(t-this.FIRE_LAST<=this.FIRE_TIME)&&i.visible){this.FIRE_LAST=t;var l={lastAdvance:0,PAGEFLIP_INTERVAL:0,execute:function(t,e,i){t.left+=r.game.pixelsPerFrame(i,t.velocityX),t.top+=r.game.pixelsPerFrame(i,t.velocityY),o.is2RectIntersect(t,{left:0,top:0,width:r.game.W,height:r.game.H})||(t.visible=!1)}},p=r.game.getSprite("player"),u=new n.Sprite("pBullet-"+o.getGUID(),new s(a.default),[e({},l)]);u.left=p.left,u.top=p.top-u.height,u.velocityY=-770,u.visible=!0;var h=new n.Sprite("pBullet-"+o.getGUID(),new s(a.default),[e({},l)]);h.left=p.left+p.width-h.width,h.top=p.top-h.height,h.velocityY=-770,h.visible=!0,r.game.setFreeSpriteNew(u),r.game.setFreeSpriteNew(h)}},t.prototype.getPlayerBulletList=function(){return r.game.sprites.filter(function(t){return t.visible&&t.name.startsWith("pBullet")})},t}();exports.PBulletsManager=p,exports.pBulletsManager=new p;
},{"../Game":20,"../Sprite":56,"../utils":21,"../../assets/bullets1.png":14}],32:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../Game"),r=e(require("../../assets/bullet3.png")),n=require("../Sprite"),o=require("../utils"),u={left:40,top:72,width:16,height:16},a=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.paint=function(t,e){var i=this;void 0!==this.image&&(this.image.complete?e.drawImage(this.image,u.left,u.top,u.width,u.height,t.left,t.top,u.width,u.height):this.image.onload=function(r){e.drawImage(i.image,u.left,u.top,u.width,u.height,t.left,t.top,u.width,u.height)})},i}(n.ImagePainter),s={lastAdvance:0,PAGEFLIP_INTERVAL:0,execute:function(t,e,r){t.left+=i.game.pixelsPerFrame(r,t.velocityX),t.top+=i.game.pixelsPerFrame(r,t.velocityY),o.is2RectIntersect(t,i.game.getRect())||(t.visible=!1)}},l=function(){function t(){}return t.prototype.addEnemyBullet=function(t){var e=new n.Sprite("eBullet-"+o.getGUID(),new a(r.default),[s].concat(t));return i.game.setFreeSpriteNew(e),e},t.prototype.getEnemyBulletList=function(){return i.game.sprites.filter(function(t){return t.visible&&t.name.startsWith("eBullet")})},t}();exports.eBulletsManager=new l;
},{"../Game":20,"../../assets/bullet3.png":15,"../Sprite":56,"../utils":21}],33:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("../../assets/bullet3.png")),i=require("../Sprite"),n=require("../Game"),o=require("../utils"),s={left:0,top:96,width:16,height:16},a={left:16,top:96,width:16,height:16},u={left:32,top:96,width:16,height:16},l={left:0,top:96,width:16,height:16},c="score",p="attack",f=[{type:c,num:3,cell:a},{type:c,num:5,cell:l},{type:p,num:3,cell:s},{type:p,num:5,cell:u}],h=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype.effect=function(){var e=n.game.getSprite("player"),t=this.BOUNS_TYPE,r=t.type,i=t.num;switch(r){case p:e.attack+=i;break;case c:n.game.score+=i}},r}(i.Sprite);function g(e){if(!(100*Math.random()>70)){var t=f[parseInt((Math.random()*f.length).toString())],s={lastAdvance:0,PAGEFLIP_INTERVAL:0,execute:function(e,t,r){e.left+=n.game.pixelsPerFrame(r,e.velocityX),e.top+=n.game.pixelsPerFrame(r,e.velocityY),o.is2RectIntersect(e,n.game.getRect())||(e.visible=!1)}},a=new h("bonus-"+o.getGUID(),new i.SpriteSheetPainter([t.cell],n.game.getImage(r.default)),[s]),u=e.left,l=e.top,c=e.width,p=e.height;a.BOUNS_TYPE=t,a.left=u+(c-16)/2,a.top=l+(p-16)/2,a.velocityX=0,a.velocityY=120,n.game.setFreeSpriteNew(a)}}function m(){return n.game.sprites.filter(function(e){return e.visible&&e.name.startsWith("bonus")})}exports.Bonus=h,exports.randomBonus=g,exports.getVisiblableBonusList=m;
},{"../../assets/bullet3.png":15,"../Sprite":56,"../Game":20,"../utils":21}],55:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../Game"),r=e(require("../../assets/enemy1.png")),o=require("../Sprite"),n=require("../utils"),s=require("./EBullet"),h=require("./Blast"),a=require("./Bonus"),l=[{left:0,top:0,width:48,height:32},{left:48,top:0,width:48,height:32},{left:96,top:0,width:48,height:32},{left:144,top:0,width:48,height:32}],p=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.paint=function(t,e){var r=this.cells[this.cellIndex];t.width=r.width,t.height=r.height,e.drawImage(this.spritesheet,r.left,r.top,r.width,r.height,t.left,t.top,r.width,r.height);var o=t.isBoss,n=t.initHp,s=t.hp;if(o){var h=i.game.W-20;e.save(),e.fillStyle="#fff",e.strokeStyle="#fff",e.beginPath(),e.rect(10,30,h,4),e.closePath(),e.stroke(),e.beginPath(),e.rect(10,30,h*s/n,4),e.closePath(),e.fill(),e.restore()}},r}(o.SpriteSheetPainter),u=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.hp=100,t.score=1,t.isBoss=!1,t.initHp=0,t}return t(r,e),r.prototype.fire=function(t,e){if(void 0===e&&(e=150),this.visible){var r=i.game.getSprite("player").getCenterPoint(),o=this.left,h=this.top,a=this.width,l=(this.height,s.eBulletsManager.addEnemyBullet([]));l.left=o+a/2-l.width/2,l.top=h+l.height+3,l.visible=!0;var p=n.getVelocityByLenPoint2Player(l.left,l.top,r.left,r.top,e);l.velocityX=p.x,l.velocityY=p.y}},r.prototype.beHit=function(){var t=i.game.getSprite("player").attack;this.hp-=t,this.hp<=0&&(i.game.score+=this.score,this.visible=!1,a.randomBonus(this.getCoreRect()),h.showBlast(this))},r.prototype.toBeBoss=function(t){this.initHp=t,this.hp=t,this.isBoss=!0},r}(o.Sprite);function c(t){void 0===t&&(t=[]);var e=new u("enemy-"+n.getGUID(),new p(l,i.game.getImage(r.default)),[{lastAdvance:0,PAGEFLIP_INTERVAL:150,execute:function(t,e,i){i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&(t.painter.advance(),this.lastAdvance=i)}}].concat(t));return e.velocityY=20,e.velocityX=40,e.width=48,e.height=32,e}exports.Enemy=u,exports.getEnemy=c;
},{"../Game":20,"../../assets/enemy1.png":16,"../Sprite":56,"../utils":21,"./EBullet":32,"./Blast":57,"./Bonus":33}],22:[function(require,module,exports) {
"use strict";var e=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./Game"),r=require("./sprites/Enemy"),a=require("./utils"),o=require("./sprites/EBullet"),s={execute:function(e,t,i){e.left+=n.game.pixelsPerFrame(i,e.velocityX),e.top+=n.game.pixelsPerFrame(i,e.velocityY),a.is2RectIntersect(e.getCoreRect(),n.game.getRect())||(e.visible=!1)}},l=function(){function l(){this.enemyLists=[],this.lastTime=0}return l.prototype.addToList=function(e,t){var i=this.enemyLists.findIndex(function(t){return t===e});-1===i?this.enemyLists.push(t):this.enemyLists[i]=t},l.prototype.getVisibleEnemyNum=function(){return this.enemyLists.filter(function(e){return e.visible}).length},l.prototype.display=function(e){if(n.game.score>=0)return this.stage1(e)},l.prototype.stage1=function(l){var c=this,u=n.game.getSprite("player"),h=n.game.score;if(h<4&&l-this.lastTime>=1e3&&0===this.getVisibleEnemyNum()){var y={lastAdvance:0,PAGEFLIP_INTERVAL:600,execute:function(e,t,i){e.top>=150&&(e.velocityY=0),i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&e.top>=150&&(e.fire(i),this.lastAdvance=i)}},v=r.getEnemy([s,e({},y)]),f=n.game.setFreeSpriteNew(v);this.addToList(f,v),v.hp=350,v.left=100,v.top=0,v.velocityX=0,v.velocityY=80,v.visible=!0;var p=r.getEnemy([s,e({},y)]),d=n.game.setFreeSpriteNew(p);return this.addToList(d,p),p.hp=350,p.left=n.game.W-100-p.width,p.top=0,p.velocityX=0,p.velocityY=80,p.visible=!0,void(this.lastTime=l)}if(4<=h&&h<10&&l-this.lastTime>=2e3&&this.getVisibleEnemyNum()<4){var m={lastAdvance:0,PAGEFLIP_INTERVAL:1300,execute:function(e,t,i){i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&n.game.H-e.top>100&&(e.fire(i),this.lastAdvance=i)}},g=(v=r.getEnemy([s,e({},m)]),f=n.game.setFreeSpriteNew(v),[{x:100,y:0},{x:0,y:70},{x:0,y:130},{x:200,y:0},{x:300,y:0},{x:500,y:100}]),b=g[parseInt((Math.random()*g.length).toString())];this.addToList(f,v),v.hp=61,v.left=b.x,v.top=b.y;var A=a.getVelocityByLenPoint2Player(v.left,v.top,u.left,u.top,80);return v.velocityX=A.x,v.velocityY=A.y,v.visible=!0,void(this.lastTime=l)}if(10<=h&&h<1e5&&l-this.lastTime>=4e3&&this.getVisibleEnemyNum()<1){var E=function(e,n){return t(c,void 0,void 0,function(){var t,n,r,s,l,c,u,h;return i(this,function(i){switch(i.label){case 0:if(!e.visible)return[3,5];t=e.left,n=e.top,r=e.width,s=e.height,l=[],c=0,i.label=1;case 1:return c<96?[4,a.delay(function(e){var i=70*(parseInt((15*e/360).toString())+1),a=15*e,c=o.eBulletsManager.addEnemyBullet([]);c.left=t+r/2+i*Math.cos(a/180*Math.PI)-c.width/2,c.top=n+s/2+i*Math.sin(a/180*Math.PI)-c.height/2,c.velocityX=0,c.velocityY=0,c.visible=!0,l[e]=c},45,c)]:[3,4];case 2:i.sent(),i.label=3;case 3:return c++,[3,1];case 4:for(c=0;c<96;c++)u=l[c],120,h=a.angle2radian(15*c),u.velocityX=120*Math.cos(h),u.velocityY=120*Math.sin(h);i.label=5;case 5:return[2]}})})},L=(m={lastAdvance:0,PAGEFLIP_INTERVAL:750,execute:function(e,t,i){i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&e.top>20&&(e.fire(i,240),this.lastAdvance=i)}},{lastAdvance:0,PAGEFLIP_INTERVAL:0,execute:function(e,t,i){e.top>=130&&e.velocityY>0&&(e.velocityY=0,e.velocityX=90),e.left>=n.game.W-100&&e.velocityX>0&&(e.velocityX=0,a.delay(function(){e.velocityX=-90},1e3*(3*Math.random()+2))),e.left<=100-e.width&&e.velocityX<0&&(e.velocityX=0,a.delay(function(){e.velocityX=90},1e3*(3*Math.random()+2)))}}),P={lastAdvance:0,PAGEFLIP_INTERVAL:13e3,execute:function(e,t,i){var r=this,o=e.getCenterPoint();0===e.velocityY&&0!==e.velocityX&&i-this.lastAdvance>this.PAGEFLIP_INTERVAL&&n.game.W/2-10<o.left&&o.left<n.game.W/2+10&&(e.velocityX=0,E(e),a.delay(function(){var t=[-1,1];e.velocityX=90*t[parseInt((Math.random()*t.length).toString())],r.lastAdvance=i},4320))}},I=r.getEnemy([s,m,L,e({},P)]);f=n.game.setFreeSpriteNew(I);return this.addToList(f,I),I.toBeBoss(2400),I.score=10,I.left=(n.game.W-I.width)/2,I.top=0,I.velocityX=0,I.velocityY=80,I.visible=!0,void(this.lastTime=l)}},l}();exports.stageControl=new l;
},{"./Game":20,"./sprites/Enemy":55,"./utils":21,"./sprites/EBullet":32}],9:[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Game"),a=e(require("../assets/pl00.png")),r=e(require("../assets/bullets1.png")),s=e(require("../assets/bullet3.png")),i=e(require("../assets/enemy1.png")),l=e(require("../assets/core.png")),n=e(require("../assets/bg1.png")),g=e(require("../assets/arua.png")),u=require("./sprites/Player"),o=require("./sprites/PBullet"),m=require("./sprites/EBullet"),c=require("./utils"),f=require("./StageControl"),d=require("./sprites/Bonus"),p=0,v=80;function y(e,t){e.addKeyListener({key:"left arrow",listener:function(e,a){a&&!t.toLeft?t.leftCalled(!0):!a&&t.toLeft&&t.leftCalled(!1),t.toLeft=a}}),e.addKeyListener({key:"right arrow",listener:function(e,a){a&&!t.toRight?t.rightCalled(!0):!a&&t.toRight&&t.rightCalled(!1),t.toRight=a}}),e.addKeyListener({key:"down arrow",listener:function(e,a){t.toDown=a}}),e.addKeyListener({key:"up arrow",listener:function(e,a){t.toUp=a}}),e.addKeyListener({key:"shift",listener:function(e,a){t.setVelocitySlow(a)}}),e.addKeyListener({key:"p",listener:function(t,a){a||e.togglePaused()}})}function q(e){document.getElementsByClassName("options")[0].addEventListener("change",function(t){var a=t.target,r=a.value,s=a.checked;switch(r){case"shield":e.isShield=s;break;case"attack":e.attack=s?50:5}})}t.game.startAnimate=function(e){var a=t.game.getImage(n.default);t.game.context.drawImage(a,0,p-512),t.game.context.drawImage(a,0,0+p),t.game.context.drawImage(a,0,p+512),p=(p+=t.game.pixelsPerFrame(e,v))>512?0:p,o.pBulletsManager.addPlayerBullet(e),f.stageControl.display(e)},t.game.paintUnderSprites=function(){for(var e=0,a=0,r=t.game.sprites;a<r.length;a++){e+=+r[a].visible}var s=t.game.context,i=t.game.fps,l=t.game.sprites,n=t.game.gameTime,g=t.game.score,u=t.game.getSprite("player").attack;s.save(),s.fillStyle="#fff",s.fillText("fps: "+parseInt(i.toString())+", sprites: "+e+"/"+l.length+", time: "+parseInt((n/1e3).toString())+", score: "+g+", attack: "+u,5,15),s.restore()},t.game.paintOverSprites=function(){for(var e=t.game.getSprite("player"),a=e.getCoreRect(),r=0,s=m.eBulletsManager.getEnemyBulletList();r<s.length;r++){var i=s[r];i.visible&&c.is2RectIntersect(i.getCoreRect(),a)&&(i.visible=!1,e.beHit())}for(var l=0;l<f.stageControl.enemyLists.length;l++){var n=f.stageControl.enemyLists[l];n.visible&&c.is2RectIntersect(n.getCoreRect(),a)&&e.beHit();for(var g=o.pBulletsManager.getPlayerBulletList(),u=0;u<g.length;u++){var p=g[u];n.visible&&p.visible&&c.is2RectIntersect(n.getCoreRect(),p.getCoreRect())&&(n.beHit(),p.visible=!1)}}for(var v=0,y=d.getVisiblableBonusList();v<y.length;v++){var q=y[v];c.is2RectIntersect(q.getCoreRect(),a)&&(q.effect(),q.visible=!1)}},t.game.queueImage(a.default),t.game.queueImage(r.default),t.game.queueImage(l.default),t.game.queueImage(i.default),t.game.queueImage(n.default),t.game.queueImage(s.default),t.game.queueImage(g.default),exports.default=function(){var e=setInterval(function(){if(t.game.loadImages()>=100){clearInterval(e);var a=u.getPlayer();t.game.addSprite(a),y(t.game,a),q(a),t.game.start()}},30);console.log(t.game)};
},{"./Game":20,"../assets/pl00.png":13,"../assets/bullets1.png":14,"../assets/bullet3.png":15,"../assets/enemy1.png":16,"../assets/core.png":17,"../assets/bg1.png":18,"../assets/arua.png":19,"./sprites/Player":30,"./sprites/PBullet":31,"./sprites/EBullet":32,"./utils":21,"./StageControl":22,"./sprites/Bonus":33}],4:[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("./index.css");var r=e(require("./js/progress"));r.default();
},{"./index.css":7,"./js/progress":9}]},{},[4], null)
//# sourceMappingURL=src.c3c9baa3.map